<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aikira Terminal</title>
    <!-- Animated Favicon -->
    <link rel="icon" type="image/svg+xml" href="assets/favicon.svg">
    <!-- CSS Files -->
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/aikira-theme.css">
    <link rel="stylesheet" href="css/terminal.css">
    <link rel="stylesheet" href="css/digital-effects.css">
    <link rel="stylesheet" href="css/animations.css">
    <link rel="stylesheet" href="css/governance-grid.css">
    <!-- Define animations if not included in other CSS files -->
    <style>
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }
    </style>
</head>
<body>
    <div class="aikira-container">
        <!-- Header Section -->
        <header class="aikira-header">
            <div class="logo-container">
                <img src="assets/images/aikira-core.svg" alt="Aikira Core" class="core-logo">
                <h1 class="terminal-title">AIKIRA TERMINAL</h1>
            </div>
            <div class="status-bar">
                <div class="status-item" id="constitutional-alignment">
                    <div class="status-label">Constitutional Alignment</div>
                    <div class="status-value" style="border-color: var(--accent-turquoise);">Initializing...</div>
                </div>
                <div class="status-item" id="proposal-evaluation">
                    <div class="status-label">Proposal Evaluation</div>
                    <div class="status-value" style="border-color: var(--accent-purple);">Ready</div>
                </div>
                <div class="status-item" id="voice-authentication">
                    <div class="status-label">Voice Authentication</div>
                    <div class="status-value" style="border-color: var(--accent-pink);">Standby</div>
                </div>
                <div class="status-item" id="consensus-index">
                    <div class="status-label">Consensus Index</div>
                    <div class="status-value" style="border-color: var(--accent-turquoise);">92%</div>
                </div>
                <div class="status-item" id="governance-notices">
                    <div class="status-label">Governance Notices</div>
                    <div class="status-value" style="border-color: var(--accent-purple);">0</div>
                </div>
            </div>
        </header>

        <!-- Main Terminal Area -->
        <main class="terminal-container">
            <!-- Digital World Background -->
            <div class="digital-world-bg">
                <!-- Floating particles will be added here via JS -->
            </div>

            <!-- Response Area -->
            <div class="response-area">
                <div class="response-text" id="response-text">
                    Aikira Constitutional AI Core initialized. How may I assist you today?
                </div>
                <div class="sound-visualization">
                    <canvas id="voice-waveform"></canvas>
                </div>
            </div>

            <!-- User Input Area -->
            <div class="user-input-container">
                <div class="input-methods">
                    <button class="voice-input-btn" id="voice-input-btn">
                        <div class="mic-icon"></div>
                        <span>Voice Input</span>
                    </button>
                    <button class="voice-input-btn" id="volume-btn">
                        <div class="volume-icon"></div>
                        <span>Volume</span>
                    </button>
                    <div class="text-input-area">
                        <textarea id="proposal-text" placeholder="Enter your governance proposal here..."></textarea>
                        <button id="submit-proposal" class="submit-btn">Submit</button>
                    </div>
                </div>
                <div class="input-status" id="input-status">Ready for input</div>
            </div>

            <!-- Volume Slider (Hidden by default) -->
            <div class="volume-slider-container" id="volume-slider-container">
                <input type="range" min="0" max="100" value="80" id="volume-slider">
                <div class="volume-value" id="volume-value">Volume: 80%</div>
            </div>
        </main>

        <!-- Governance Panels -->
        <aside class="governance-panels">
            <!-- Proposal Evaluation Panel -->
            <div class="panel" id="evaluation-panel">
                <div class="panel-title">Proposal Evaluation</div>
                <div class="panel-content">
                    <div class="evaluation-metrics">
                        <div class="metric">
                            <div class="metric-label">Fairness Index:</div>
                            <div class="metric-bar">
                                <div class="metric-value" style="width: 80%"></div>
                            </div>
                        </div>
                        <div class="metric">
                            <div class="metric-label">Value Alignment:</div>
                            <div class="metric-bar">
                                <div class="metric-value" style="width: 75%"></div>
                            </div>
                        </div>
                        <div class="metric">
                            <div class="metric-label">Protection Score:</div>
                            <div class="metric-bar">
                                <div class="metric-value" style="width: 90%"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Consensus Visualization Panel -->
            <div class="panel" id="consensus-panel">
                <div class="panel-title">Consensus Visualization</div>
                <div class="panel-content">
                    <div class="consensus-visualization">
                        <div class="consensus-label">Consensus Index</div>
                        <div class="consensus-triangle">
                            <div class="triangle-shape"></div>
                            <div class="consensus-indicator"></div>
                        </div>
                        <div class="consensus-value">92%</div>
                    </div>
                </div>
            </div>
        </aside>
    </div>

    <!-- Audio Elements -->
    <audio id="startup-sound" src="assets/audio/startup.wav" preload="auto"></audio>
    <audio id="deliberation-sound" src="assets/audio/deliberation.wav" preload="auto"></audio>
    <audio id="proposal-submit-sound" src="assets/audio/proposal-submit.wav" preload="auto"></audio>
    <audio id="governance-alert-sound" src="assets/audio/governance-alert.wav" preload="auto"></audio>

    <!-- Audio initialization overlay -->
    <div id="audio-init-overlay" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(18, 21, 26, 0.85); display: flex; justify-content: center; align-items: center; z-index: 9999; backdrop-filter: blur(5px);">
        <div style="text-align: center; padding: 30px; background-color: var(--medium-bg); border-radius: 15px; border: 1px solid var(--trans-light); box-shadow: 0 0 30px rgba(216, 181, 255, 0.3);">
            <h2 style="color: var(--soft-pink); margin-bottom: 20px; font-family: var(--display-font);">Welcome to Aikira Terminal</h2>
            <p style="color: var(--soft-white); margin-bottom: 25px;">Browser security requires user interaction before playing audio.</p>
            <button id="enable-audio-btn" style="padding: 12px 25px; font-size: 16px; margin-bottom: 15px; background: linear-gradient(135deg, var(--accent-purple), var(--accent-turquoise)); border: none; border-radius: 10px; color: var(--soft-white); cursor: pointer;">Enable Audio</button>
            <p style="color: var(--lavender-purple); font-size: 14px; opacity: 0.8;">Click to initialize Aikira's voice capabilities</p>
        </div>
    </div>

    <!-- Scripts -->
    <script src="lib/three.min.js"></script>
    <script src="lib/p5.min.js"></script>
    <script src="lib/gsap.min.js"></script>
    <script src="js/digital-effects.js"></script>
    <script src="js/governance-elements.js"></script>
    <script src="js/constitutional-core.js"></script>
    <script src="js/audio-controls.js"></script>
    <script src="js/terminal.js"></script>
    <script src="js/animations.js"></script>
    <script src="js/main.js"></script>
    
    <!-- Audio initialization script -->
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // Enable audio button
        const enableBtn = document.getElementById('enable-audio-btn');
        const overlay = document.getElementById('audio-init-overlay');
    
        if (enableBtn && overlay) {
            enableBtn.addEventListener('click', function() {
                // Initialize audio context
                if (typeof initAudio === 'function') {
                    initAudio();
                }
                
                // Play startup sound
                if (typeof playAudio === 'function') {
                    playAudio('assets/audio/startup.wav');
                }
                
                // Hide overlay with animation
                overlay.style.animation = 'fadeOut 0.5s forwards';
                setTimeout(() => {
                    overlay.style.display = 'none';
                }, 500);
            });
        }
        
        // Submit proposal button
        const submitButton = document.getElementById('submit-proposal');
        const proposalText = document.getElementById('proposal-text');
        
        if (submitButton && proposalText) {
            submitButton.addEventListener('click', function() {
                const proposal = proposalText.value.trim();
                if (proposal && typeof processProposal === 'function') {
                    processProposal(proposal);
                }
            });
            
            // Submit on Enter key (with Shift+Enter for new line)
            proposalText.addEventListener('keydown', function(e) {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    submitButton.click();
                }
            });
        }
        
        // Volume button
        const volumeBtn = document.getElementById('volume-btn');
        const volumeSliderContainer = document.getElementById('volume-slider-container');
        
        if (volumeBtn && volumeSliderContainer) {
            volumeBtn.addEventListener('click', function() {
                // Toggle volume slider visibility
                volumeSliderContainer.classList.toggle('visible');
                
                // Auto-hide after 5 seconds if visible
                if (volumeSliderContainer.classList.contains('visible')) {
                    setTimeout(() => {
                        volumeSliderContainer.classList.remove('visible');
                    }, 5000);
                }
            });
        }
        
        // Volume slider
        const volumeSlider = document.getElementById('volume-slider');
        const volumeValue = document.getElementById('volume-value');
        
        if (volumeSlider && volumeValue) {
            volumeSlider.addEventListener('input', function() {
                const volume = this.value / 100;
                volumeValue.textContent = `Volume: ${this.value}%`;
                
                // Update volume if function exists
                if (typeof setVolume === 'function') {
                    setVolume(volume);
                }
            });
        }
    });
    </script>
</body>
</html>